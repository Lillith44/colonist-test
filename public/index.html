<!DOCTYPE html>
<html>
<head>
    <title>Ping Pong Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
<canvas id="canvas" width="800" height="400"></canvas>
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript">
    const game_state = {
        'left_paddle_y': 0,
        'right_paddle_y': 0,
        'ball_position': [0, 0],
        'keys': {}
    }

    const paddle_speed = 1;

    //Set app to correct width;
    app.width = window.innerWidth;
    app.height = window.innerHeight;

    app.onInit = function () {
        this.nodes.push(
            {
                id: 'paddle-left',
                x: 50,
                y: 0,
                width: 10,
                height: 100
            }
        )

        this.nodes.push(
            {
                id: 'paddle-right',
                x: app.width - 60, //50 + 10 to compensate for width of paddle
                y: 0,
                width: 10,
                height: 100
            }
        )
    };

    app.onUpdate = function (time) {
        if (game_state.keys['ArrowDown']) {
            game_state.right_paddle_y += time * paddle_speed;
        }
        if (game_state.keys['ArrowUp']) {
            game_state.right_paddle_y -= time * paddle_speed;
        }
        if (game_state.keys['KeyS']) {
            game_state.left_paddle_y += time * paddle_speed;
        }
        if (game_state.keys['KeyW']) {
            game_state.left_paddle_y -= time * paddle_speed;
        }

        this.getNode('paddle-left').y = game_state.left_paddle_y;
        this.getNode('paddle-right').y = game_state.right_paddle_y;
    };

    document.addEventListener('keydown', (ev) => {
        game_state.keys[ev.code] = true;

    });
    document.addEventListener('keyup', (ev) => {
        game_state.keys[ev.code] = false;

    })
</script>
</body>
</html>